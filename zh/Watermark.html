<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Watermark - é¡µé¢æ°´å°ç±» | xxm-test-js</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="xxm-test-jsã€‚ä¸€ä¸ªå¼€ç®±å³ç”¨çš„å‡½æ•°åº“ã€‚æä¾›äº†æ—¥å¸¸å¼€å‘æ—¶æ‰€éœ€çš„ä¸€äº›å¸¸ç”¨å‡½æ•°æ–¹æ³•ã€‚è¯¥jsåº“æä¾›äº†ä¸°å¯Œçš„ä»£ç æç¤ºåŠŸèƒ½ï¼Œæ— éœ€é˜…è¯»æ–‡æ¡£ï¼Œæ–¹ä¾¿å¼€å‘è€…å¿«é€Ÿä½¿ç”¨ã€‚">
    
    <link rel="preload" href="/xxm-test-js/assets/css/0.styles.2c1b7aba.css" as="style"><link rel="preload" href="/xxm-test-js/assets/js/app.dcf02476.js" as="script"><link rel="preload" href="/xxm-test-js/assets/js/2.4470ce03.js" as="script"><link rel="preload" href="/xxm-test-js/assets/js/1.adb73c09.js" as="script"><link rel="preload" href="/xxm-test-js/assets/js/26.7b64ced4.js" as="script"><link rel="prefetch" href="/xxm-test-js/assets/js/10.acd366ff.js"><link rel="prefetch" href="/xxm-test-js/assets/js/11.0256ff5f.js"><link rel="prefetch" href="/xxm-test-js/assets/js/12.137a9576.js"><link rel="prefetch" href="/xxm-test-js/assets/js/13.786f62b7.js"><link rel="prefetch" href="/xxm-test-js/assets/js/14.91be0496.js"><link rel="prefetch" href="/xxm-test-js/assets/js/15.3b92efb8.js"><link rel="prefetch" href="/xxm-test-js/assets/js/16.47e1d84d.js"><link rel="prefetch" href="/xxm-test-js/assets/js/17.368b07ea.js"><link rel="prefetch" href="/xxm-test-js/assets/js/18.8241d824.js"><link rel="prefetch" href="/xxm-test-js/assets/js/19.56a0d05b.js"><link rel="prefetch" href="/xxm-test-js/assets/js/20.8f60a139.js"><link rel="prefetch" href="/xxm-test-js/assets/js/21.e21ffad3.js"><link rel="prefetch" href="/xxm-test-js/assets/js/22.c6046648.js"><link rel="prefetch" href="/xxm-test-js/assets/js/23.910892dd.js"><link rel="prefetch" href="/xxm-test-js/assets/js/24.e0d26f8f.js"><link rel="prefetch" href="/xxm-test-js/assets/js/25.66c55f1c.js"><link rel="prefetch" href="/xxm-test-js/assets/js/27.bfdf4f26.js"><link rel="prefetch" href="/xxm-test-js/assets/js/28.60aa3937.js"><link rel="prefetch" href="/xxm-test-js/assets/js/29.749333b8.js"><link rel="prefetch" href="/xxm-test-js/assets/js/3.8af8fcbf.js"><link rel="prefetch" href="/xxm-test-js/assets/js/30.d9af15cc.js"><link rel="prefetch" href="/xxm-test-js/assets/js/31.2311b96f.js"><link rel="prefetch" href="/xxm-test-js/assets/js/32.9f493ffe.js"><link rel="prefetch" href="/xxm-test-js/assets/js/33.8112eacf.js"><link rel="prefetch" href="/xxm-test-js/assets/js/34.43dd135d.js"><link rel="prefetch" href="/xxm-test-js/assets/js/35.d398ee87.js"><link rel="prefetch" href="/xxm-test-js/assets/js/36.e15c8187.js"><link rel="prefetch" href="/xxm-test-js/assets/js/37.8f6e274f.js"><link rel="prefetch" href="/xxm-test-js/assets/js/38.4b435599.js"><link rel="prefetch" href="/xxm-test-js/assets/js/39.b39f49c1.js"><link rel="prefetch" href="/xxm-test-js/assets/js/4.0471e9ae.js"><link rel="prefetch" href="/xxm-test-js/assets/js/40.92ff5703.js"><link rel="prefetch" href="/xxm-test-js/assets/js/41.0cc7552d.js"><link rel="prefetch" href="/xxm-test-js/assets/js/42.bd200973.js"><link rel="prefetch" href="/xxm-test-js/assets/js/43.d2cf12e4.js"><link rel="prefetch" href="/xxm-test-js/assets/js/44.d1b4b810.js"><link rel="prefetch" href="/xxm-test-js/assets/js/45.505f3d9f.js"><link rel="prefetch" href="/xxm-test-js/assets/js/46.c4c27d6d.js"><link rel="prefetch" href="/xxm-test-js/assets/js/47.f6dbcd52.js"><link rel="prefetch" href="/xxm-test-js/assets/js/48.4b8ee7a6.js"><link rel="prefetch" href="/xxm-test-js/assets/js/49.cd366613.js"><link rel="prefetch" href="/xxm-test-js/assets/js/5.842b4107.js"><link rel="prefetch" href="/xxm-test-js/assets/js/50.70d32984.js"><link rel="prefetch" href="/xxm-test-js/assets/js/51.a3919824.js"><link rel="prefetch" href="/xxm-test-js/assets/js/52.407ef3c2.js"><link rel="prefetch" href="/xxm-test-js/assets/js/53.76126960.js"><link rel="prefetch" href="/xxm-test-js/assets/js/54.9659a012.js"><link rel="prefetch" href="/xxm-test-js/assets/js/55.dbc4994f.js"><link rel="prefetch" href="/xxm-test-js/assets/js/56.4d11d50d.js"><link rel="prefetch" href="/xxm-test-js/assets/js/57.170cf746.js"><link rel="prefetch" href="/xxm-test-js/assets/js/58.1a263542.js"><link rel="prefetch" href="/xxm-test-js/assets/js/59.6705356b.js"><link rel="prefetch" href="/xxm-test-js/assets/js/6.9f813617.js"><link rel="prefetch" href="/xxm-test-js/assets/js/60.9621d16b.js"><link rel="prefetch" href="/xxm-test-js/assets/js/61.a02053f5.js"><link rel="prefetch" href="/xxm-test-js/assets/js/62.6ce42995.js"><link rel="prefetch" href="/xxm-test-js/assets/js/63.1102171b.js"><link rel="prefetch" href="/xxm-test-js/assets/js/64.975c1c21.js"><link rel="prefetch" href="/xxm-test-js/assets/js/65.3724f670.js"><link rel="prefetch" href="/xxm-test-js/assets/js/66.b0ed74f1.js"><link rel="prefetch" href="/xxm-test-js/assets/js/67.edbed901.js"><link rel="prefetch" href="/xxm-test-js/assets/js/68.027bf815.js"><link rel="prefetch" href="/xxm-test-js/assets/js/69.588fbc80.js"><link rel="prefetch" href="/xxm-test-js/assets/js/7.deca3814.js"><link rel="prefetch" href="/xxm-test-js/assets/js/vendors~docsearch.a43fb3db.js">
    <link rel="stylesheet" href="/xxm-test-js/assets/css/0.styles.2c1b7aba.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/xxm-test-js/" class="home-link router-link-active"><!----> <span class="site-name">xxm-test-js</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/xxm-test-js/" class="nav-link">
  é¦–é¡µ
</a></div><div class="nav-item"><a href="/xxm-test-js/zh/guide.html" class="nav-link">
  æŒ‡å—
</a></div><div class="nav-item"><a href="/xxm-test-js/zh/roadmap.html" class="nav-link">
  è·¯çº¿å›¾
</a></div><div class="nav-item"><a href="https://github.com/xuxiaomao123/xxm-test-js" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/xxm-test-js/" class="nav-link">
  é¦–é¡µ
</a></div><div class="nav-item"><a href="/xxm-test-js/zh/guide.html" class="nav-link">
  æŒ‡å—
</a></div><div class="nav-item"><a href="/xxm-test-js/zh/roadmap.html" class="nav-link">
  è·¯çº¿å›¾
</a></div><div class="nav-item"><a href="https://github.com/xuxiaomao123/xxm-test-js" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>æŒ‡å—</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/xxm-test-js/zh/guide.html" class="sidebar-link">æŒ‡å—</a></li><li><a href="/xxm-test-js/zh/roadmap.html" class="sidebar-link">ğŸ“‹ å¼€å‘è·¯çº¿å›¾</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>å¸¸ç”¨æ–¹æ³•</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>æ—¶é—´æ–¹æ³•</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>å­—ç¬¦ä¸²/æ•°å­—æ–¹æ³•</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>æ•°ç»„/å¯¹è±¡æ–¹æ³•</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>æ»šåŠ¨æ–¹æ³•</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>æµè§ˆå™¨æ–¹æ³•</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>å¸¸ç”¨ç±»</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/xxm-test-js/zh/TimeThread.html" class="sidebar-link">æ—¶é—´çº¿ç¨‹ç±»ï¼ˆTimeThreadï¼‰</a></li><li><a href="/xxm-test-js/zh/ScrollDirectionChecker.html" class="sidebar-link">æ»šåŠ¨æ–¹å‘æ£€æµ‹ç±»ï¼ˆScrollDirectionCheckerï¼‰</a></li><li><a href="/xxm-test-js/zh/FormValidator.html" class="sidebar-link">è¡¨å•éªŒè¯ç±»ï¼ˆFormValidatorï¼‰</a></li><li><a href="/xxm-test-js/zh/WebSocketClient.html" class="sidebar-link">WebSocketClient - WebSocket å®¢æˆ·ç«¯å°è£…ç±»</a></li><li><a href="/xxm-test-js/zh/Watermark.html" aria-current="page" class="active sidebar-link">Watermark - é¡µé¢æ°´å°ç±»</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/xxm-test-js/zh/Watermark.html#ç®€ä»‹" class="sidebar-link">ç®€ä»‹</a></li><li class="sidebar-sub-header"><a href="/xxm-test-js/zh/Watermark.html#ä¸»è¦ç‰¹æ€§" class="sidebar-link">ä¸»è¦ç‰¹æ€§</a></li><li class="sidebar-sub-header"><a href="/xxm-test-js/zh/Watermark.html#å®‰è£…" class="sidebar-link">å®‰è£…</a></li><li class="sidebar-sub-header"><a href="/xxm-test-js/zh/Watermark.html#åŸºæœ¬ç”¨æ³•" class="sidebar-link">åŸºæœ¬ç”¨æ³•</a></li><li class="sidebar-sub-header"><a href="/xxm-test-js/zh/Watermark.html#é…ç½®é€‰é¡¹" class="sidebar-link">é…ç½®é€‰é¡¹</a></li><li class="sidebar-sub-header"><a href="/xxm-test-js/zh/Watermark.html#api-æ–¹æ³•" class="sidebar-link">API æ–¹æ³•</a></li><li class="sidebar-sub-header"><a href="/xxm-test-js/zh/Watermark.html#ä½¿ç”¨åœºæ™¯" class="sidebar-link">ä½¿ç”¨åœºæ™¯</a></li><li class="sidebar-sub-header"><a href="/xxm-test-js/zh/Watermark.html#é«˜çº§ç”¨æ³•" class="sidebar-link">é«˜çº§ç”¨æ³•</a></li><li class="sidebar-sub-header"><a href="/xxm-test-js/zh/Watermark.html#æ ·å¼å®šåˆ¶" class="sidebar-link">æ ·å¼å®šåˆ¶</a></li><li class="sidebar-sub-header"><a href="/xxm-test-js/zh/Watermark.html#æœ€ä½³å®è·µ" class="sidebar-link">æœ€ä½³å®è·µ</a></li><li class="sidebar-sub-header"><a href="/xxm-test-js/zh/Watermark.html#æ³¨æ„äº‹é¡¹" class="sidebar-link">æ³¨æ„äº‹é¡¹</a></li><li class="sidebar-sub-header"><a href="/xxm-test-js/zh/Watermark.html#æµè§ˆå™¨æ”¯æŒ" class="sidebar-link">æµè§ˆå™¨æ”¯æŒ</a></li><li class="sidebar-sub-header"><a href="/xxm-test-js/zh/Watermark.html#å¸¸è§é—®é¢˜" class="sidebar-link">å¸¸è§é—®é¢˜</a></li><li class="sidebar-sub-header"><a href="/xxm-test-js/zh/Watermark.html#è®¸å¯è¯" class="sidebar-link">è®¸å¯è¯</a></li><li class="sidebar-sub-header"><a href="/xxm-test-js/zh/Watermark.html#ç›¸å…³é“¾æ¥" class="sidebar-link">ç›¸å…³é“¾æ¥</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="watermark-é¡µé¢æ°´å°ç±»"><a href="#watermark-é¡µé¢æ°´å°ç±»" class="header-anchor">#</a> Watermark - é¡µé¢æ°´å°ç±»</h1> <h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="header-anchor">#</a> ç®€ä»‹</h2> <p><code>Watermark</code> æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„é¡µé¢æ°´å°ç±»ï¼Œç”¨äºåœ¨é¡µé¢ä¸Šæ·»åŠ é˜²åˆ é™¤çš„æ–‡å­—æ°´å°ã€‚å¸¸ç”¨äºç‰ˆæƒä¿æŠ¤ã€ä¿¡æ¯å®‰å…¨ã€é˜²æ­¢æˆªå›¾æ³„å¯†ç­‰åœºæ™¯ã€‚</p> <h2 id="ä¸»è¦ç‰¹æ€§"><a href="#ä¸»è¦ç‰¹æ€§" class="header-anchor">#</a> ä¸»è¦ç‰¹æ€§</h2> <ul><li>âœ… <strong>è‡ªå®šä¹‰å†…å®¹</strong>ï¼šæ”¯æŒå•è¡Œæˆ–å¤šè¡Œæ–‡å­—æ°´å°</li> <li>âœ… <strong>æ ·å¼é…ç½®</strong>ï¼šå¯é…ç½®å­—ä½“ã€é¢œè‰²ã€å¤§å°ã€é€æ˜åº¦ã€æ—‹è½¬è§’åº¦ç­‰</li> <li>âœ… <strong>é˜²åˆ é™¤ä¿æŠ¤</strong>ï¼šä½¿ç”¨ MutationObserver ç›‘å¬ DOM å˜åŒ–ï¼Œè‡ªåŠ¨æ¢å¤è¢«åˆ é™¤æˆ–ä¿®æ”¹çš„æ°´å°</li> <li>âœ… <strong>é«˜æ€§èƒ½</strong>ï¼šä½¿ç”¨ Canvas ç”Ÿæˆæ°´å°å›¾æ¡ˆï¼Œä»¥ base64 å›¾ç‰‡ä½œä¸ºèƒŒæ™¯</li> <li>âœ… <strong>å“åº”å¼</strong>ï¼šè‡ªåŠ¨é€‚é…å®¹å™¨å¤§å°å˜åŒ–</li> <li>âœ… <strong>æ˜“äºé”€æ¯</strong>ï¼šæä¾›å®Œæ•´çš„é”€æ¯æ–¹æ³•ï¼Œæ¸…ç†æ‰€æœ‰èµ„æº</li></ul> <h2 id="å®‰è£…"><a href="#å®‰è£…" class="header-anchor">#</a> å®‰è£…</h2> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> xxm-test-js
</code></pre></div><h2 id="åŸºæœ¬ç”¨æ³•"><a href="#åŸºæœ¬ç”¨æ³•" class="header-anchor">#</a> åŸºæœ¬ç”¨æ³•</h2> <h3 id="ç®€å•ç¤ºä¾‹"><a href="#ç®€å•ç¤ºä¾‹" class="header-anchor">#</a> ç®€å•ç¤ºä¾‹</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Watermark <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'xxm-test-js'</span><span class="token punctuation">;</span>

<span class="token comment">// åˆ›å»ºæ°´å°å®ä¾‹</span>
<span class="token keyword">const</span> watermark <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Watermark</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  content<span class="token operator">:</span> <span class="token string">'æœºå¯†æ–‡æ¡£'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// æ˜¾ç¤ºæ°´å°</span>
watermark<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="å¤šè¡Œæ°´å°"><a href="#å¤šè¡Œæ°´å°" class="header-anchor">#</a> å¤šè¡Œæ°´å°</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> watermark <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Watermark</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  content<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'å¼ ä¸‰'</span><span class="token punctuation">,</span> <span class="token string">'2024-01-01'</span><span class="token punctuation">,</span> <span class="token string">'ä»…ä¾›å†…éƒ¨ä½¿ç”¨'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  fontSize<span class="token operator">:</span> <span class="token number">14</span><span class="token punctuation">,</span>
  opacity<span class="token operator">:</span> <span class="token number">0.1</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

watermark<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="è‡ªå®šä¹‰æ ·å¼"><a href="#è‡ªå®šä¹‰æ ·å¼" class="header-anchor">#</a> è‡ªå®šä¹‰æ ·å¼</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> watermark <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Watermark</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  content<span class="token operator">:</span> <span class="token string">'ç‰ˆæƒæ‰€æœ‰'</span><span class="token punctuation">,</span>
  width<span class="token operator">:</span> <span class="token number">250</span><span class="token punctuation">,</span>
  height<span class="token operator">:</span> <span class="token number">180</span><span class="token punctuation">,</span>
  fontSize<span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
  fontWeight<span class="token operator">:</span> <span class="token string">'bold'</span><span class="token punctuation">,</span>
  color<span class="token operator">:</span> <span class="token string">'#FF0000'</span><span class="token punctuation">,</span>
  opacity<span class="token operator">:</span> <span class="token number">0.2</span><span class="token punctuation">,</span>
  rotate<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">30</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

watermark<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="é…ç½®é€‰é¡¹"><a href="#é…ç½®é€‰é¡¹" class="header-anchor">#</a> é…ç½®é€‰é¡¹</h2> <h3 id="watermarkoptions"><a href="#watermarkoptions" class="header-anchor">#</a> WatermarkOptions</h3> <table><thead><tr><th>å‚æ•°</th> <th>ç±»å‹</th> <th>é»˜è®¤å€¼</th> <th>è¯´æ˜</th></tr></thead> <tbody><tr><td><code>content</code></td> <td><code>string \| string[]</code></td> <td><code>'æ°´å°'</code></td> <td>æ°´å°å†…å®¹ï¼Œæ”¯æŒå­—ç¬¦ä¸²æˆ–å­—ç¬¦ä¸²æ•°ç»„ï¼ˆå¤šè¡Œï¼‰</td></tr> <tr><td><code>container</code></td> <td><code>HTMLElement</code></td> <td><code>document.body</code></td> <td>æ°´å°å®¹å™¨å…ƒç´ </td></tr> <tr><td><code>width</code></td> <td><code>number</code></td> <td><code>200</code></td> <td>æ°´å°å®½åº¦ï¼ˆåƒç´ ï¼‰</td></tr> <tr><td><code>height</code></td> <td><code>number</code></td> <td><code>150</code></td> <td>æ°´å°é«˜åº¦ï¼ˆåƒç´ ï¼‰</td></tr> <tr><td><code>fontSize</code></td> <td><code>number</code></td> <td><code>16</code></td> <td>å­—ä½“å¤§å°ï¼ˆåƒç´ ï¼‰</td></tr> <tr><td><code>fontStyle</code></td> <td><code>'normal' \| 'italic' \| 'oblique'</code></td> <td><code>'normal'</code></td> <td>å­—ä½“æ ·å¼</td></tr> <tr><td><code>fontWeight</code></td> <td><code>'normal' \| 'bold' \| 'bolder' \| 'lighter' \| number</code></td> <td><code>'normal'</code></td> <td>å­—ä½“ç²—ç»†</td></tr> <tr><td><code>fontFamily</code></td> <td><code>string</code></td> <td><code>'Microsoft YaHei, sans-serif'</code></td> <td>å­—ä½“ç³»åˆ—</td></tr> <tr><td><code>color</code></td> <td><code>string</code></td> <td><code>'#000000'</code></td> <td>æ–‡å­—é¢œè‰²</td></tr> <tr><td><code>opacity</code></td> <td><code>number</code></td> <td><code>0.15</code></td> <td>é€æ˜åº¦ï¼ˆ0-1ï¼‰</td></tr> <tr><td><code>rotate</code></td> <td><code>number</code></td> <td><code>-20</code></td> <td>æ—‹è½¬è§’åº¦ï¼ˆåº¦æ•°ï¼Œæ­£æ•°é¡ºæ—¶é’ˆï¼Œè´Ÿæ•°é€†æ—¶é’ˆï¼‰</td></tr> <tr><td><code>zIndex</code></td> <td><code>number</code></td> <td><code>9999</code></td> <td>å±‚çº§</td></tr> <tr><td><code>lineHeight</code></td> <td><code>number</code></td> <td><code>20</code></td> <td>è¡Œé—´è·ï¼ˆä»…å¤šè¡Œæ—¶æœ‰æ•ˆï¼‰</td></tr> <tr><td><code>monitor</code></td> <td><code>boolean</code></td> <td><code>true</code></td> <td>æ˜¯å¦å¯ç”¨é˜²åˆ é™¤ä¿æŠ¤</td></tr> <tr><td><code>id</code></td> <td><code>string</code></td> <td><code>'watermark-container'</code></td> <td>æ°´å°å±‚çš„ DOM id</td></tr></tbody></table> <h2 id="api-æ–¹æ³•"><a href="#api-æ–¹æ³•" class="header-anchor">#</a> API æ–¹æ³•</h2> <h3 id="create"><a href="#create" class="header-anchor">#</a> create()</h3> <p>åˆ›å»ºå¹¶æ˜¾ç¤ºæ°´å°ã€‚</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code>watermark<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="update-options"><a href="#update-options" class="header-anchor">#</a> update(options)</h3> <p>æ›´æ–°æ°´å°é…ç½®å¹¶é‡æ–°æ¸²æŸ“ã€‚</p> <p><strong>å‚æ•°ï¼š</strong></p> <ul><li><code>options</code>: æ–°çš„é…ç½®é€‰é¡¹ï¼ˆéƒ¨åˆ†æ›´æ–°ï¼‰</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// æ›´æ–°æ°´å°å†…å®¹</span>
watermark<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  content<span class="token operator">:</span> <span class="token string">'æ–°çš„æ°´å°å†…å®¹'</span><span class="token punctuation">,</span>
  color<span class="token operator">:</span> <span class="token string">'#FF0000'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="destroy"><a href="#destroy" class="header-anchor">#</a> destroy()</h3> <p>é”€æ¯æ°´å°ï¼Œç§»é™¤ DOM å…ƒç´ å¹¶æ¸…ç†æ‰€æœ‰ç›‘å¬å™¨ã€‚</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code>watermark<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="ä½¿ç”¨åœºæ™¯"><a href="#ä½¿ç”¨åœºæ™¯" class="header-anchor">#</a> ä½¿ç”¨åœºæ™¯</h2> <h3 id="åœºæ™¯-1-åå°ç®¡ç†ç³»ç»Ÿ"><a href="#åœºæ™¯-1-åå°ç®¡ç†ç³»ç»Ÿ" class="header-anchor">#</a> åœºæ™¯ 1ï¼šåå°ç®¡ç†ç³»ç»Ÿ</h3> <p>åœ¨æ•æ„Ÿä¿¡æ¯é¡µé¢æ·»åŠ ç”¨æˆ·ä¿¡æ¯æ°´å°ï¼Œé˜²æ­¢æˆªå›¾æ³„å¯†ã€‚</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Watermark <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'xxm-test-js'</span><span class="token punctuation">;</span>

<span class="token comment">// è·å–å½“å‰ç™»å½•ç”¨æˆ·ä¿¡æ¯</span>
<span class="token keyword">const</span> userInfo <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'å¼ ä¸‰'</span><span class="token punctuation">,</span>
  id<span class="token operator">:</span> <span class="token string">'U001'</span><span class="token punctuation">,</span>
  time<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// åˆ›å»ºæ°´å°</span>
<span class="token keyword">const</span> watermark <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Watermark</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  content<span class="token operator">:</span> <span class="token punctuation">[</span>
    userInfo<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">å·¥å·: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>userInfo<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    userInfo<span class="token punctuation">.</span>time
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  fontSize<span class="token operator">:</span> <span class="token number">14</span><span class="token punctuation">,</span>
  opacity<span class="token operator">:</span> <span class="token number">0.12</span><span class="token punctuation">,</span>
  rotate<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">,</span>
  color<span class="token operator">:</span> <span class="token string">'#000000'</span><span class="token punctuation">,</span>
  monitor<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// å¯ç”¨é˜²åˆ é™¤</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

watermark<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="åœºæ™¯-2-æ–‡æ¡£é¢„è§ˆé¡µé¢"><a href="#åœºæ™¯-2-æ–‡æ¡£é¢„è§ˆé¡µé¢" class="header-anchor">#</a> åœºæ™¯ 2ï¼šæ–‡æ¡£é¢„è§ˆé¡µé¢</h3> <p>ä¸ºåœ¨çº¿æ–‡æ¡£æ·»åŠ ç‰ˆæƒæ°´å°ã€‚</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> watermark <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Watermark</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  content<span class="token operator">:</span> <span class="token string">'ç‰ˆæƒæ‰€æœ‰ Â© 2024 å…¬å¸åç§°'</span><span class="token punctuation">,</span>
  fontSize<span class="token operator">:</span> <span class="token number">16</span><span class="token punctuation">,</span>
  opacity<span class="token operator">:</span> <span class="token number">0.1</span><span class="token punctuation">,</span>
  rotate<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">15</span><span class="token punctuation">,</span>
  fontWeight<span class="token operator">:</span> <span class="token string">'bold'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

watermark<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="åœºæ™¯-3-æŒ‡å®šå®¹å™¨æ°´å°"><a href="#åœºæ™¯-3-æŒ‡å®šå®¹å™¨æ°´å°" class="header-anchor">#</a> åœºæ™¯ 3ï¼šæŒ‡å®šå®¹å™¨æ°´å°</h3> <p>åœ¨ç‰¹å®šå®¹å™¨å†…æ·»åŠ æ°´å°ï¼ˆå¦‚æŸä¸ª divï¼‰ã€‚</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> container <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'content-area'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> watermark <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Watermark</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  content<span class="token operator">:</span> <span class="token string">'å†…éƒ¨èµ„æ–™'</span><span class="token punctuation">,</span>
  container<span class="token operator">:</span> container<span class="token punctuation">,</span>
  fontSize<span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
  opacity<span class="token operator">:</span> <span class="token number">0.08</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

watermark<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="åœºæ™¯-4-åŠ¨æ€æ°´å°"><a href="#åœºæ™¯-4-åŠ¨æ€æ°´å°" class="header-anchor">#</a> åœºæ™¯ 4ï¼šåŠ¨æ€æ°´å°</h3> <p>æ ¹æ®ä¸åŒæƒ…å†µåŠ¨æ€æ›´æ–°æ°´å°å†…å®¹ã€‚</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> watermark <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Watermark</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  content<span class="token operator">:</span> <span class="token string">'è‰ç¨¿'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

watermark<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// æ–‡æ¡£çŠ¶æ€æ”¹å˜æ—¶æ›´æ–°æ°´å°</span>
<span class="token keyword">function</span> <span class="token function">onDocumentStatusChange</span><span class="token punctuation">(</span>status<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span><span class="token punctuation">(</span>status<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">'draft'</span><span class="token operator">:</span>
      watermark<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span> content<span class="token operator">:</span> <span class="token string">'è‰ç¨¿'</span><span class="token punctuation">,</span> color<span class="token operator">:</span> <span class="token string">'#999999'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">'review'</span><span class="token operator">:</span>
      watermark<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span> content<span class="token operator">:</span> <span class="token string">'å®¡æ ¸ä¸­'</span><span class="token punctuation">,</span> color<span class="token operator">:</span> <span class="token string">'#FF9800'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">'approved'</span><span class="token operator">:</span>
      watermark<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span> content<span class="token operator">:</span> <span class="token string">'å·²æ‰¹å‡†'</span><span class="token punctuation">,</span> color<span class="token operator">:</span> <span class="token string">'#4CAF50'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="åœºæ™¯-5-åœ¨-vue-3-ä¸­ä½¿ç”¨"><a href="#åœºæ™¯-5-åœ¨-vue-3-ä¸­ä½¿ç”¨" class="header-anchor">#</a> åœºæ™¯ 5ï¼šåœ¨ Vue 3 ä¸­ä½¿ç”¨</h3> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>containerRef<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content-area<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- é¡µé¢å†…å®¹ --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>æ•æ„Ÿä¿¡æ¯é¡µé¢<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>è¿™æ˜¯ä¸€äº›éœ€è¦ä¿æŠ¤çš„å†…å®¹...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> onMounted<span class="token punctuation">,</span> onUnmounted <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Watermark <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'xxm-test-js'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> containerRef <span class="token operator">=</span> ref<span class="token operator">&lt;</span>HTMLElement<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token literal-property property">watermark</span><span class="token operator">:</span> Watermark <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>containerRef<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// åˆ›å»ºæ°´å°</span>
    watermark <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Watermark</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'å¼ ä¸‰'</span><span class="token punctuation">,</span> <span class="token string">'ID: 12345'</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLocaleDateString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">container</span><span class="token operator">:</span> containerRef<span class="token punctuation">.</span>value<span class="token punctuation">,</span>
      <span class="token literal-property property">fontSize</span><span class="token operator">:</span> <span class="token number">14</span><span class="token punctuation">,</span>
      <span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token number">0.15</span><span class="token punctuation">,</span>
      <span class="token literal-property property">rotate</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">,</span>
      <span class="token literal-property property">monitor</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    watermark<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">onUnmounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// æ¸…ç†æ°´å°</span>
  watermark<span class="token operator">?.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.content-area</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
  <span class="token property">min-height</span><span class="token punctuation">:</span> 100vh<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="åœºæ™¯-6-åœ¨-react-ä¸­ä½¿ç”¨"><a href="#åœºæ™¯-6-åœ¨-react-ä¸­ä½¿ç”¨" class="header-anchor">#</a> åœºæ™¯ 6ï¼šåœ¨ React ä¸­ä½¿ç”¨</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useEffect<span class="token punctuation">,</span> useRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Watermark <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'xxm-test-js'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">SecureDocument</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> containerRef <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useRef</span><span class="token generic class-name"><span class="token operator">&lt;</span>HTMLDivElement<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> watermarkRef <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useRef</span><span class="token generic class-name"><span class="token operator">&lt;</span>Watermark <span class="token operator">|</span> <span class="token keyword">null</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>containerRef<span class="token punctuation">.</span>current<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// åˆ›å»ºæ°´å°</span>
      watermarkRef<span class="token punctuation">.</span>current <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Watermark</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        content<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'æœºå¯†æ–‡æ¡£'</span><span class="token punctuation">,</span> <span class="token string">'Confidential'</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLocaleDateString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        container<span class="token operator">:</span> containerRef<span class="token punctuation">.</span>current<span class="token punctuation">,</span>
        fontSize<span class="token operator">:</span> <span class="token number">16</span><span class="token punctuation">,</span>
        opacity<span class="token operator">:</span> <span class="token number">0.12</span><span class="token punctuation">,</span>
        color<span class="token operator">:</span> <span class="token string">'#FF0000'</span><span class="token punctuation">,</span>
        rotate<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">25</span><span class="token punctuation">,</span>
        monitor<span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      watermarkRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// æ¸…ç†å‡½æ•°</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      watermarkRef<span class="token punctuation">.</span>current<span class="token operator">?.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div ref<span class="token operator">=</span><span class="token punctuation">{</span>containerRef<span class="token punctuation">}</span> style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> position<span class="token operator">:</span> <span class="token string">'relative'</span><span class="token punctuation">,</span> minHeight<span class="token operator">:</span> <span class="token string">'100vh'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>æœºå¯†æ–‡æ¡£<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>è¿™æ˜¯éœ€è¦ä¿æŠ¤çš„æ•æ„Ÿå†…å®¹<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> SecureDocument<span class="token punctuation">;</span>
</code></pre></div><h3 id="åœºæ™¯-7-ä¸´æ—¶æ°´å°"><a href="#åœºæ™¯-7-ä¸´æ—¶æ°´å°" class="header-anchor">#</a> åœºæ™¯ 7ï¼šä¸´æ—¶æ°´å°</h3> <p>åœ¨æŸäº›æ“ä½œæœŸé—´ä¸´æ—¶æ˜¾ç¤ºæ°´å°ã€‚</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Watermark <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'xxm-test-js'</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> tempWatermark<span class="token operator">:</span> Watermark <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

<span class="token comment">// å¼€å§‹æ•æ„Ÿæ“ä½œæ—¶æ˜¾ç¤ºæ°´å°</span>
<span class="token keyword">function</span> <span class="token function">startSensitiveOperation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  tempWatermark <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Watermark</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    content<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'æ­£åœ¨è¿›è¡Œæ•æ„Ÿæ“ä½œ'</span><span class="token punctuation">,</span> <span class="token string">'è¯·å‹¿æˆªå›¾'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    fontSize<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
    opacity<span class="token operator">:</span> <span class="token number">0.3</span><span class="token punctuation">,</span>
    color<span class="token operator">:</span> <span class="token string">'#FF0000'</span><span class="token punctuation">,</span>
    fontWeight<span class="token operator">:</span> <span class="token string">'bold'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  tempWatermark<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// æ“ä½œå®Œæˆåç§»é™¤æ°´å°</span>
<span class="token keyword">function</span> <span class="token function">endSensitiveOperation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  tempWatermark<span class="token operator">?.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  tempWatermark <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">handleSensitiveTask</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">startSensitiveOperation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token comment">// æ‰§è¡Œæ•æ„Ÿæ“ä½œ</span>
    <span class="token keyword">await</span> <span class="token function">performTask</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
    <span class="token function">endSensitiveOperation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="åœºæ™¯-8-å¤šå®ä¾‹æ°´å°"><a href="#åœºæ™¯-8-å¤šå®ä¾‹æ°´å°" class="header-anchor">#</a> åœºæ™¯ 8ï¼šå¤šå®ä¾‹æ°´å°</h3> <p>åœ¨ä¸åŒå®¹å™¨ä¸­åˆ›å»ºå¤šä¸ªç‹¬ç«‹çš„æ°´å°ã€‚</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// ä¸ºä¸åŒåŒºåŸŸåˆ›å»ºä¸åŒçš„æ°´å°</span>
<span class="token keyword">const</span> headerWatermark <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Watermark</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  content<span class="token operator">:</span> <span class="token string">'Header Area'</span><span class="token punctuation">,</span>
  container<span class="token operator">:</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.header'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  id<span class="token operator">:</span> <span class="token string">'watermark-header'</span><span class="token punctuation">,</span>
  fontSize<span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span>
  opacity<span class="token operator">:</span> <span class="token number">0.08</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> mainWatermark <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Watermark</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  content<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'Main Content'</span><span class="token punctuation">,</span> <span class="token string">'Confidential'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  container<span class="token operator">:</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.main'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  id<span class="token operator">:</span> <span class="token string">'watermark-main'</span><span class="token punctuation">,</span>
  fontSize<span class="token operator">:</span> <span class="token number">16</span><span class="token punctuation">,</span>
  opacity<span class="token operator">:</span> <span class="token number">0.12</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> footerWatermark <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Watermark</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  content<span class="token operator">:</span> <span class="token string">'Footer Area'</span><span class="token punctuation">,</span>
  container<span class="token operator">:</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.footer'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  id<span class="token operator">:</span> <span class="token string">'watermark-footer'</span><span class="token punctuation">,</span>
  fontSize<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
  opacity<span class="token operator">:</span> <span class="token number">0.06</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

headerWatermark<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mainWatermark<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
footerWatermark<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="é«˜çº§ç”¨æ³•"><a href="#é«˜çº§ç”¨æ³•" class="header-anchor">#</a> é«˜çº§ç”¨æ³•</h2> <h3 id="é˜²åˆ é™¤ä¿æŠ¤åŸç†"><a href="#é˜²åˆ é™¤ä¿æŠ¤åŸç†" class="header-anchor">#</a> é˜²åˆ é™¤ä¿æŠ¤åŸç†</h3> <p>æ°´å°ç±»ä½¿ç”¨ <code>MutationObserver</code> API ç›‘å¬ DOM å˜åŒ–ï¼Œå½“æ£€æµ‹åˆ°æ°´å°è¢«åˆ é™¤æˆ–ä¿®æ”¹æ—¶ï¼Œä¼šè‡ªåŠ¨é‡æ–°åˆ›å»ºæ°´å°ã€‚</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// å¯ç”¨é˜²åˆ é™¤ä¿æŠ¤ï¼ˆé»˜è®¤å¼€å¯ï¼‰</span>
<span class="token keyword">const</span> watermark <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Watermark</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  content<span class="token operator">:</span> <span class="token string">'å—ä¿æŠ¤çš„æ°´å°'</span><span class="token punctuation">,</span>
  monitor<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// å¯ç”¨ç›‘å¬</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

watermark<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// å³ä½¿ç”¨æˆ·é€šè¿‡å¼€å‘è€…å·¥å…·åˆ é™¤æ°´å°å…ƒç´ ï¼Œå®ƒä¹Ÿä¼šç«‹å³é‡æ–°å‡ºç°</span>
</code></pre></div><h3 id="ç¦ç”¨é˜²åˆ é™¤ä¿æŠ¤"><a href="#ç¦ç”¨é˜²åˆ é™¤ä¿æŠ¤" class="header-anchor">#</a> ç¦ç”¨é˜²åˆ é™¤ä¿æŠ¤</h3> <p>åœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œä½ å¯èƒ½å¸Œæœ›æ°´å°å¯ä»¥è¢«ç§»é™¤ï¼š</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> watermark <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Watermark</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  content<span class="token operator">:</span> <span class="token string">'æ™®é€šæ°´å°'</span><span class="token punctuation">,</span>
  monitor<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token comment">// ç¦ç”¨é˜²åˆ é™¤ä¿æŠ¤</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

watermark<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="è‡ªå®šä¹‰å®¹å™¨"><a href="#è‡ªå®šä¹‰å®¹å™¨" class="header-anchor">#</a> è‡ªå®šä¹‰å®¹å™¨</h3> <p>ä¸ºç‰¹å®šå…ƒç´ æ·»åŠ æ°´å°ï¼š</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> myContainer <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'my-container'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ç¡®ä¿å®¹å™¨æœ‰ç›¸å¯¹æˆ–ç»å¯¹å®šä½</span>
myContainer<span class="token punctuation">.</span>style<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token string">'relative'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> watermark <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Watermark</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  content<span class="token operator">:</span> <span class="token string">'åŒºåŸŸæ°´å°'</span><span class="token punctuation">,</span>
  container<span class="token operator">:</span> myContainer
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

watermark<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="å“åº”å¼æ°´å°"><a href="#å“åº”å¼æ°´å°" class="header-anchor">#</a> å“åº”å¼æ°´å°</h3> <p>æ°´å°ä¼šè‡ªåŠ¨å“åº”å®¹å™¨å¤§å°çš„å˜åŒ–ï¼š</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> watermark <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Watermark</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  content<span class="token operator">:</span> <span class="token string">'å“åº”å¼æ°´å°'</span><span class="token punctuation">,</span>
  container<span class="token operator">:</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.responsive-container'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

watermark<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// å½“å®¹å™¨å¤§å°æ”¹å˜æ—¶ï¼Œæ°´å°ä¼šè‡ªåŠ¨è°ƒæ•´</span>
</code></pre></div><h2 id="æ ·å¼å®šåˆ¶"><a href="#æ ·å¼å®šåˆ¶" class="header-anchor">#</a> æ ·å¼å®šåˆ¶</h2> <h3 id="è°ƒæ•´å¯†åº¦"><a href="#è°ƒæ•´å¯†åº¦" class="header-anchor">#</a> è°ƒæ•´å¯†åº¦</h3> <p>é€šè¿‡è°ƒæ•´ <code>width</code> å’Œ <code>height</code> æ¥æ§åˆ¶æ°´å°çš„å¯†åº¦ï¼š</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// å¯†é›†æ°´å°</span>
<span class="token keyword">const</span> denseWatermark <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Watermark</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  content<span class="token operator">:</span> <span class="token string">'å¯†é›†'</span><span class="token punctuation">,</span>
  width<span class="token operator">:</span> <span class="token number">150</span><span class="token punctuation">,</span>
  height<span class="token operator">:</span> <span class="token number">100</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ç¨€ç–æ°´å°</span>
<span class="token keyword">const</span> sparseWatermark <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Watermark</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  content<span class="token operator">:</span> <span class="token string">'ç¨€ç–'</span><span class="token punctuation">,</span>
  width<span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">,</span>
  height<span class="token operator">:</span> <span class="token number">250</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="ä¸åŒé¢œè‰²ä¸»é¢˜"><a href="#ä¸åŒé¢œè‰²ä¸»é¢˜" class="header-anchor">#</a> ä¸åŒé¢œè‰²ä¸»é¢˜</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// æµ…è‰²ä¸»é¢˜ï¼ˆæ·±è‰²æ°´å°ï¼‰</span>
<span class="token keyword">const</span> lightTheme <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Watermark</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  content<span class="token operator">:</span> <span class="token string">'æµ…è‰²ä¸»é¢˜'</span><span class="token punctuation">,</span>
  color<span class="token operator">:</span> <span class="token string">'#000000'</span><span class="token punctuation">,</span>
  opacity<span class="token operator">:</span> <span class="token number">0.12</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// æ·±è‰²ä¸»é¢˜ï¼ˆæµ…è‰²æ°´å°ï¼‰</span>
<span class="token keyword">const</span> darkTheme <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Watermark</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  content<span class="token operator">:</span> <span class="token string">'æ·±è‰²ä¸»é¢˜'</span><span class="token punctuation">,</span>
  color<span class="token operator">:</span> <span class="token string">'#FFFFFF'</span><span class="token punctuation">,</span>
  opacity<span class="token operator">:</span> <span class="token number">0.08</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="ä¸åŒæ—‹è½¬è§’åº¦"><a href="#ä¸åŒæ—‹è½¬è§’åº¦" class="header-anchor">#</a> ä¸åŒæ—‹è½¬è§’åº¦</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// é€†æ—¶é’ˆæ—‹è½¬</span>
<span class="token keyword">const</span> watermark1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Watermark</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  content<span class="token operator">:</span> <span class="token string">'é€†æ—¶é’ˆ'</span><span class="token punctuation">,</span>
  rotate<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">20</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// é¡ºæ—¶é’ˆæ—‹è½¬</span>
<span class="token keyword">const</span> watermark2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Watermark</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  content<span class="token operator">:</span> <span class="token string">'é¡ºæ—¶é’ˆ'</span><span class="token punctuation">,</span>
  rotate<span class="token operator">:</span> <span class="token number">20</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// æ°´å¹³æ–¹å‘</span>
<span class="token keyword">const</span> watermark3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Watermark</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  content<span class="token operator">:</span> <span class="token string">'æ°´å¹³'</span><span class="token punctuation">,</span>
  rotate<span class="token operator">:</span> <span class="token number">0</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="æœ€ä½³å®è·µ"><a href="#æœ€ä½³å®è·µ" class="header-anchor">#</a> æœ€ä½³å®è·µ</h2> <h3 id="_1-åˆç†è®¾ç½®é€æ˜åº¦"><a href="#_1-åˆç†è®¾ç½®é€æ˜åº¦" class="header-anchor">#</a> 1. åˆç†è®¾ç½®é€æ˜åº¦</h3> <p>é€æ˜åº¦å¤ªé«˜ä¼šå½±å“é˜…è¯»ä½“éªŒï¼Œå¤ªä½åˆ™å¤±å»æ°´å°æ•ˆæœã€‚å»ºè®®èŒƒå›´ï¼š0.08 - 0.20ã€‚</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> watermark <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Watermark</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  content<span class="token operator">:</span> <span class="token string">'æ¨èé€æ˜åº¦'</span><span class="token punctuation">,</span>
  opacity<span class="token operator">:</span> <span class="token number">0.12</span> <span class="token comment">// æ¨èå€¼</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_2-é€‰æ‹©åˆé€‚çš„æ—‹è½¬è§’åº¦"><a href="#_2-é€‰æ‹©åˆé€‚çš„æ—‹è½¬è§’åº¦" class="header-anchor">#</a> 2. é€‰æ‹©åˆé€‚çš„æ—‹è½¬è§’åº¦</h3> <p>å»ºè®®ä½¿ç”¨ -30Â° åˆ° -15Â° ä¹‹é—´çš„è§’åº¦ï¼Œè¿™æ ·æ—¢èƒ½ä¿è¯æ°´å°æ•ˆæœï¼Œåˆä¸ä¼šå¤ªè¿‡çªå…€ã€‚</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> watermark <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Watermark</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  content<span class="token operator">:</span> <span class="token string">'æ¨èè§’åº¦'</span><span class="token punctuation">,</span>
  rotate<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">20</span> <span class="token comment">// æ¨èå€¼</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_3-åŠæ—¶æ¸…ç†èµ„æº"><a href="#_3-åŠæ—¶æ¸…ç†èµ„æº" class="header-anchor">#</a> 3. åŠæ—¶æ¸…ç†èµ„æº</h3> <p>åœ¨ç»„ä»¶å¸è½½æˆ–é¡µé¢å…³é—­æ—¶ï¼Œè®°å¾—è°ƒç”¨ <code>destroy()</code> æ–¹æ³•ã€‚</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// Vue</span>
<span class="token function">onUnmounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  watermark<span class="token operator">?.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// React</span>
<span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    watermark<span class="token operator">?.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_4-ç¡®ä¿å®¹å™¨æœ‰å®šä½"><a href="#_4-ç¡®ä¿å®¹å™¨æœ‰å®šä½" class="header-anchor">#</a> 4. ç¡®ä¿å®¹å™¨æœ‰å®šä½</h3> <p>æ°´å°ä½¿ç”¨ç»å¯¹å®šä½ï¼Œç¡®ä¿å®¹å™¨å…ƒç´ æœ‰ <code>position: relative</code> æˆ– <code>position: absolute</code>ã€‚</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> container <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'container'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
container<span class="token punctuation">.</span>style<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token string">'relative'</span><span class="token punctuation">;</span> <span class="token comment">// é‡è¦ï¼</span>

<span class="token keyword">const</span> watermark <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Watermark</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  container<span class="token operator">:</span> container<span class="token punctuation">,</span>
  content<span class="token operator">:</span> <span class="token string">'å®¹å™¨æ°´å°'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_5-æ ¹æ®åœºæ™¯è°ƒæ•´é˜²åˆ é™¤ç­–ç•¥"><a href="#_5-æ ¹æ®åœºæ™¯è°ƒæ•´é˜²åˆ é™¤ç­–ç•¥" class="header-anchor">#</a> 5. æ ¹æ®åœºæ™¯è°ƒæ•´é˜²åˆ é™¤ç­–ç•¥</h3> <ul><li><strong>é«˜å®‰å…¨åœºæ™¯</strong>ï¼šå¯ç”¨ <code>monitor: true</code></li> <li><strong>æ™®é€šåœºæ™¯</strong>ï¼šå¯ä»¥ç¦ç”¨ <code>monitor: false</code> ä»¥æé«˜æ€§èƒ½</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// é«˜å®‰å…¨åœºæ™¯</span>
<span class="token keyword">const</span> secureWatermark <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Watermark</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  content<span class="token operator">:</span> <span class="token string">'æœºå¯†'</span><span class="token punctuation">,</span>
  monitor<span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// æ™®é€šåœºæ™¯</span>
<span class="token keyword">const</span> normalWatermark <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Watermark</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  content<span class="token operator">:</span> <span class="token string">'æ™®é€š'</span><span class="token punctuation">,</span>
  monitor<span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="header-anchor">#</a> æ³¨æ„äº‹é¡¹</h2> <ol><li><strong>æ€§èƒ½è€ƒè™‘</strong>ï¼šå¯ç”¨ <code>monitor</code> ä¼šæŒç»­ç›‘å¬ DOM å˜åŒ–ï¼Œåœ¨å¤æ‚é¡µé¢ä¸­å¯èƒ½å½±å“æ€§èƒ½</li> <li><strong>å®¹å™¨å®šä½</strong>ï¼šç¡®ä¿å®¹å™¨å…ƒç´ æœ‰ <code>position: relative</code> æˆ– <code>position: absolute</code></li> <li><strong>å±‚çº§é—®é¢˜</strong>ï¼šå¦‚æœæ°´å°è¢«å…¶ä»–å…ƒç´ é®æŒ¡ï¼Œå¯ä»¥è°ƒæ•´ <code>zIndex</code> å€¼</li> <li><strong>ç§»åŠ¨ç«¯å…¼å®¹</strong>ï¼šåœ¨ç§»åŠ¨è®¾å¤‡ä¸Šæ³¨æ„è°ƒæ•´å­—ä½“å¤§å°å’Œå¯†åº¦</li> <li><strong>å†…å®¹é•¿åº¦</strong>ï¼šè¿‡é•¿çš„å†…å®¹å¯èƒ½è¶…å‡ºæ°´å°èŒƒå›´ï¼Œå»ºè®®åˆ†å¤šè¡Œæ˜¾ç¤º</li> <li><strong>é¢œè‰²å¯¹æ¯”</strong>ï¼šç¡®ä¿æ°´å°é¢œè‰²ä¸èƒŒæ™¯æœ‰è¶³å¤Ÿçš„å¯¹æ¯”åº¦</li></ol> <h2 id="æµè§ˆå™¨æ”¯æŒ"><a href="#æµè§ˆå™¨æ”¯æŒ" class="header-anchor">#</a> æµè§ˆå™¨æ”¯æŒ</h2> <ul><li>Chrome 51+</li> <li>Firefox 14+</li> <li>Safari 10+</li> <li>Edge 12+</li> <li>Opera 38+</li> <li>IE 11+ï¼ˆMutationObserver æ”¯æŒï¼‰</li></ul> <p>æ³¨æ„ï¼š<code>ResizeObserver</code> åœ¨æ—§ç‰ˆæµè§ˆå™¨ä¸­å¯èƒ½ä¸æ”¯æŒï¼Œä¼šè‡ªåŠ¨é™çº§åˆ° <code>window.resize</code> äº‹ä»¶ã€‚</p> <h2 id="å¸¸è§é—®é¢˜"><a href="#å¸¸è§é—®é¢˜" class="header-anchor">#</a> å¸¸è§é—®é¢˜</h2> <h3 id="q-æ°´å°å¯ä»¥è¢«åˆ é™¤å—"><a href="#q-æ°´å°å¯ä»¥è¢«åˆ é™¤å—" class="header-anchor">#</a> Q: æ°´å°å¯ä»¥è¢«åˆ é™¤å—ï¼Ÿ</h3> <p>A: å¦‚æœå¯ç”¨äº† <code>monitor: true</code>ï¼ˆé»˜è®¤å¯ç”¨ï¼‰ï¼Œå³ä½¿ç”¨æˆ·é€šè¿‡å¼€å‘è€…å·¥å…·åˆ é™¤æ°´å°ï¼Œå®ƒä¹Ÿä¼šè‡ªåŠ¨æ¢å¤ã€‚ä½†è¿™å¹¶ä¸èƒ½å®Œå…¨é˜²æ­¢æŠ€æœ¯æ‰‹æ®µçš„ç»•è¿‡ã€‚</p> <h3 id="q-å¦‚ä½•è®©æ°´å°ä¸å½±å“é¡µé¢äº¤äº’"><a href="#q-å¦‚ä½•è®©æ°´å°ä¸å½±å“é¡µé¢äº¤äº’" class="header-anchor">#</a> Q: å¦‚ä½•è®©æ°´å°ä¸å½±å“é¡µé¢äº¤äº’ï¼Ÿ</h3> <p>A: æ°´å°ä½¿ç”¨ <code>pointer-events: none</code> æ ·å¼ï¼Œä¸ä¼šå½±å“é¡µé¢çš„ç‚¹å‡»å’Œäº¤äº’ã€‚</p> <h3 id="q-å¯ä»¥åœ¨ç‰¹å®šå…ƒç´ ä¸Šæ·»åŠ æ°´å°å—"><a href="#q-å¯ä»¥åœ¨ç‰¹å®šå…ƒç´ ä¸Šæ·»åŠ æ°´å°å—" class="header-anchor">#</a> Q: å¯ä»¥åœ¨ç‰¹å®šå…ƒç´ ä¸Šæ·»åŠ æ°´å°å—ï¼Ÿ</h3> <p>A: å¯ä»¥ï¼Œé€šè¿‡ <code>container</code> é€‰é¡¹æŒ‡å®šç›®æ ‡å…ƒç´ å³å¯ã€‚</p> <h3 id="q-æ°´å°ä¼šå½±å“é¡µé¢æ€§èƒ½å—"><a href="#q-æ°´å°ä¼šå½±å“é¡µé¢æ€§èƒ½å—" class="header-anchor">#</a> Q: æ°´å°ä¼šå½±å“é¡µé¢æ€§èƒ½å—ï¼Ÿ</h3> <p>A: æ°´å°ä½¿ç”¨ Canvas ç”Ÿæˆ base64 å›¾ç‰‡ï¼Œæ€§èƒ½å½±å“å¾ˆå°ã€‚ä½†å¯ç”¨ <code>monitor</code> ä¼šæŒç»­ç›‘å¬ DOMï¼Œåœ¨å¤æ‚é¡µé¢å¯èƒ½æœ‰è½»å¾®å½±å“ã€‚</p> <h3 id="q-å¦‚ä½•å®ç°å¤šç§è¯­è¨€çš„æ°´å°"><a href="#q-å¦‚ä½•å®ç°å¤šç§è¯­è¨€çš„æ°´å°" class="header-anchor">#</a> Q: å¦‚ä½•å®ç°å¤šç§è¯­è¨€çš„æ°´å°ï¼Ÿ</h3> <p>A: ç›´æ¥åœ¨ <code>content</code> ä¸­ä½¿ç”¨å¯¹åº”è¯­è¨€çš„æ–‡å­—å³å¯ï¼Œæ”¯æŒä¸­æ–‡ã€è‹±æ–‡ã€æ—¥æ–‡ç­‰ã€‚</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> watermark <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Watermark</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  content<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'Confidential'</span><span class="token punctuation">,</span> <span class="token string">'æœºå¯†'</span><span class="token punctuation">,</span> <span class="token string">'ç§˜å¯†'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  fontFamily<span class="token operator">:</span> <span class="token string">'Arial, Microsoft YaHei, sans-serif'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="è®¸å¯è¯"><a href="#è®¸å¯è¯" class="header-anchor">#</a> è®¸å¯è¯</h2> <p>MIT</p> <h2 id="ç›¸å…³é“¾æ¥"><a href="#ç›¸å…³é“¾æ¥" class="header-anchor">#</a> ç›¸å…³é“¾æ¥</h2> <ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Canvas_API" target="_blank" rel="noopener noreferrer">Canvas API<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/MutationObserver" target="_blank" rel="noopener noreferrer">MutationObserver<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/ResizeObserver" target="_blank" rel="noopener noreferrer">ResizeObserver<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/xxm-test-js/zh/WebSocketClient.html" class="prev">
        WebSocketClient - WebSocket å®¢æˆ·ç«¯å°è£…ç±»
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/xxm-test-js/assets/js/app.dcf02476.js" defer></script><script src="/xxm-test-js/assets/js/2.4470ce03.js" defer></script><script src="/xxm-test-js/assets/js/1.adb73c09.js" defer></script><script src="/xxm-test-js/assets/js/26.7b64ced4.js" defer></script>
  </body>
</html>
